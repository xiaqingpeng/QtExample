<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Qt + ECharts Demo</title>
    <!-- 引入ECharts -->
    <script src="echarts.min.js"></script>
    <style>
        /* 让图表占满整个页面 */
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; }
        #chart-container { width: 100%; height: 100%; }
    </style>
</head>
<body>
    <div id="chart-container"></div>

    <script>
        // 初始化ECharts实例
        var myChart = echarts.init(document.getElementById('chart-container'));

        // 默认配置（可被Qt动态修改）
        var option = {
            title: { text: 'Qt + ECharts 柱状图示例', left: 'center' },
            tooltip: { trigger: 'axis' },
            legend: { data: ['销量'], left: 'left' },
            xAxis: {
                type: 'category',
                data: ['衬衫', '羊毛衫', '雪纺衫', '裤子', '高跟鞋', '袜子']
            },
            yAxis: { type: 'value' },
            series: [{
                name: '销量',
                type: 'bar',
                data: [5, 20, 36, 10, 10, 20]
            }]
        };

        // 渲染图表
        myChart.setOption(option);

        // 监听窗口大小变化，自适应图表
        window.onresize = function() {
            myChart.resize();
        };

        // 供Qt调用的函数：更新图表数据
        function updateChart(newData) {
            option.series[0].data = newData;
            myChart.setOption(option);
        }

        // 供Qt调用的函数：更新X轴类别
        function updateXAxis(newCategories) {
            option.xAxis.data = newCategories;
            myChart.setOption(option);
        }

        // ECharts点击事件：回调到Qt
        myChart.on('click', function(params) {
            // 向Qt发送信号（通过window.qt对象，由Qt注册）
            if (window.qt) {
                window.qt.onChartClicked(params.name, params.value);
            }
        });
    </script>
</body>
</html>